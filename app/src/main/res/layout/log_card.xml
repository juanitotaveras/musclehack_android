<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:card_view="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        <import type="android.view.View" />

        <variable
            name="logcardmodel"
            type="com.musclehack.targetedHypertrophyTraining.workoutTracker.training.LogCardModel" />

        <variable
            name="viewmodel"
            type="com.musclehack.targetedHypertrophyTraining.workoutTracker.training.TrainingViewModel" />

        <variable
            name="position"
            type="Integer" />
    </data>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/logCardLayout"
        android:onClick="@{() -> viewmodel.onRequestDefocus()}"
        app:logcardmodel="@{logcardmodel}"
        app:viewModel="@{viewmodel}">

        <androidx.cardview.widget.CardView
            android:id="@+id/cardView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="5dip"
            android:background="@color/white"
            android:padding="5dip"
            card_view:cardCornerRadius="4dp"
            app:item="@{logcardmodel}">

            <RelativeLayout
                android:id="@+id/cardContainer"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:paddingBottom="5dip"
                android:paddingEnd="10dip"
                android:paddingLeft="10dip"
                android:paddingRight="10dip"
                android:paddingStart="10dip"
                android:paddingTop="5dip">

                <TextView
                    android:id="@+id/exerciseNum"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentStart="true"
                    android:layout_alignParentTop="true"
                    android:paddingTop="4dip"
                    android:textColor="#000000"
                    android:textSize="17sp"
                    android:text="@{logcardmodel.getExerciseNumText()}" />

                <TextView
                    android:id="@+id/exerciseNameText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/exerciseNum"
                    android:layout_alignParentTop="true"
                    android:layout_marginLeft="5dip"
                    android:layout_marginStart="5dip"
                    android:layout_toEndOf="@+id/exerciseNum"
                    android:layout_toRightOf="@+id/exerciseNum"
                    android:textColor="#000000"
                    android:textSize="17sp"
                    android:text="@{logcardmodel.getExerciseName()}" />

                <ImageView
                    android:id="@+id/optionsIcon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentEnd="true"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/restTimerButton"

                    android:contentDescription="@string/options_icon"
                    android:layout_marginLeft="20dip"
                    android:layout_marginTop="10dip"
                    android:layout_marginBottom="4dip"
                    android:src="@drawable/ic_options_icon"
                    tools:ignore="RtlSymmetry"
                    android:background="?android:attr/selectableItemBackground"
                    android:layout_marginStart="20dip" />

                <TextView
                    android:id="@+id/prevWeightText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/exerciseNameText"
                    android:layout_alignStart="@id/exerciseNameText"
                    android:layout_below="@id/exerciseNameText"
                    android:layout_marginTop="5dip"
                    android:layout_toEndOf="@+id/exerciseNum"
                    android:layout_toRightOf="@+id/exerciseNum"
                    android:text="@string/prev_weight"
                    android:textColor="@color/secondaryText"
                    android:textSize="15sp"
                    android:visibility="@{logcardmodel.shouldShowPrevWeight() ? View.VISIBLE : View.INVISIBLE}" />

                <TextView
                    android:id="@+id/prevWeightTextBox"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@id/prevWeightText"
                    android:layout_alignTop="@id/prevWeightText"
                    android:layout_marginLeft="5dip"
                    android:layout_marginStart="5dip"
                    android:layout_toEndOf="@id/prevWeightText"
                    android:layout_toRightOf="@id/prevWeightText"
                    android:textColor="#000000"
                    android:textSize="15sp"
                    android:text="@{logcardmodel.getPrevWeight()}"
                    android:visibility="@{logcardmodel.shouldShowPrevWeight() ? View.VISIBLE : View.INVISIBLE}" />

                <TextView
                    android:id="@+id/currentWeightText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/prevWeightTextBox"
                    android:layout_marginEnd="5dip"
                    android:layout_marginRight="5dip"
                    android:layout_toLeftOf="@id/currentWeightTextBox"
                    android:layout_toStartOf="@id/currentWeightTextBox"
                    android:text="@string/cur_weight"
                    android:textColor="@color/secondaryText"
                    android:textSize="15sp" />

                <EditText
                    android:id="@+id/currentWeightTextBox"
                    android:layout_width="55dip"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/currentWeightText"
                    android:layout_alignParentEnd="true"
                    android:layout_alignParentRight="true"
                    android:layout_marginEnd="5dip"
                    android:layout_marginRight="5dip"
                    android:background="@drawable/input_text_border_gray"
                    android:inputType="numberDecimal"
                    android:text="@{logcardmodel.getWeightText()}"
                    android:visibility="@{logcardmodel.exerciseLog.skip ? View.INVISIBLE : View.VISIBLE}" />

                <TextView
                    android:id="@+id/prevRepsText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/prevWeightText"
                    android:layout_alignStart="@+id/prevWeightText"
                    android:layout_below="@id/prevWeightText"
                    android:layout_marginTop="9dip"
                    android:text="@string/prev_reps"
                    android:textColor="@color/secondaryText"
                    android:textSize="15sp"
                    android:visibility="@{logcardmodel.shouldShowPrevReps() ? View.VISIBLE : View.INVISIBLE}" />

                <TextView
                    android:id="@+id/prevRepsTextBox"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/prevRepsText"
                    android:layout_alignLeft="@id/prevWeightTextBox"
                    android:layout_alignStart="@id/prevWeightTextBox"
                    android:layout_toEndOf="@+id/prevWeightText"
                    android:layout_toRightOf="@+id/prevWeightText"
                    android:textColor="#000000"
                    android:visibility="@{logcardmodel.shouldShowPrevReps() ? View.VISIBLE : View.INVISIBLE}"
                    android:text="@{logcardmodel.getPrevReps()}" />


                <TextView
                    android:id="@+id/currentRepsText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/prevRepsTextBox"
                    android:layout_alignBottom="@+id/prevRepsTextBox"
                    android:layout_alignLeft="@+id/currentWeightText"
                    android:layout_alignStart="@+id/currentWeightText"
                    android:text="@string/cur_reps"
                    android:textColor="@color/secondaryText"
                    android:textSize="15sp" />

                <EditText
                    android:id="@+id/currentRepsTextBox"
                    android:layout_width="55dip"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@id/currentRepsText"
                    android:layout_alignLeft="@id/currentWeightTextBox"
                    android:layout_alignStart="@id/currentWeightTextBox"
                    android:layout_toEndOf="@+id/currentRepsText"
                    android:layout_toRightOf="@+id/currentRepsText"
                    android:background="@drawable/input_text_border_gray"
                    android:inputType="number"
                    android:text="@{logcardmodel.getRepsText()}"
                    android:visibility="@{logcardmodel.exerciseLog.skip ? View.INVISIBLE : View.VISIBLE}" />

                <TextView
                    android:id="@+id/repRangeText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@id/exerciseNameText"
                    android:layout_alignStart="@id/exerciseNameText"
                    android:layout_below="@+id/prevRepsText"
                    android:layout_toEndOf="@id/exerciseNum"
                    android:layout_toRightOf="@id/currentRepsTextBox"
                    android:paddingBottom="9dip"
                    android:paddingTop="10dip"
                    android:text="@string/rep_range"
                    android:textColor="@color/secondaryText"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/repRangeLowerTextBox"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@id/repRangeText"
                    android:layout_below="@+id/currentRepsText"
                    android:layout_marginLeft="5dip"
                    android:layout_marginStart="5dip"
                    android:layout_marginTop="10dip"
                    android:layout_toEndOf="@+id/repRangeText"
                    android:layout_toRightOf="@+id/repRangeText"
                    android:textColor="#000000"
                    android:textSize="15sp"
                    android:text="@{logcardmodel.getLowerReps()}" />

                <TextView
                    android:id="@+id/repRangeDashText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@id/repRangeLowerTextBox"
                    android:layout_below="@+id/currentRepsText"
                    android:layout_marginEnd="2dip"
                    android:layout_marginLeft="2dip"
                    android:layout_marginRight="2dip"
                    android:layout_marginStart="2dip"
                    android:layout_marginTop="10dip"
                    android:layout_toEndOf="@+id/repRangeLowerTextBox"
                    android:layout_toRightOf="@+id/repRangeLowerTextBox"
                    android:text="@string/dash"
                    android:textColor="#000000"
                    android:textSize="15sp" />


                <TextView
                    android:id="@+id/repRangeHigherTextBox"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@id/repRangeDashText"
                    android:layout_below="@+id/currentRepsText"
                    android:layout_marginTop="10dip"
                    android:layout_toEndOf="@+id/repRangeDashText"
                    android:layout_toRightOf="@+id/repRangeDashText"
                    android:textColor="#000000"
                    android:textSize="15sp"
                    android:text="@{logcardmodel.getHigherReps()}" />

                <TextView
                    android:id="@+id/restTimeText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@id/currentRepsText"
                    android:layout_alignStart="@id/currentRepsText"
                    android:layout_below="@+id/currentRepsText"
                    android:layout_marginTop="10dip"
                    android:layout_toEndOf="@id/repRangeHigherTextBox"
                    android:layout_toRightOf="@id/repRangeHigherTextBox"
                    android:layout_alignBaseline="@id/repRangeHigherTextBox"
                    android:text="@string/rest_time"
                    android:textSize="15sp"
                    android:textColor="@color/secondaryText" />

                <Button
                    android:id="@+id/restTimerButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@id/repRangeText"
                    android:layout_below="@+id/currentRepsText"

                    android:layout_alignParentRight="true"
                    android:layout_alignParentEnd="true"
                    style="@style/AppTheme.ButtonPrimary"
                    android:textColor="@color/white"
                    android:text="180 sec." />

                <androidx.appcompat.widget.AppCompatButton
                    android:id="@+id/noteButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/repRangeText"
                    android:layout_alignStart="@id/repRangeText"
                    android:layout_alignLeft="@id/repRangeText"
                    style="@style/AppTheme.ButtonPrimary"
                    android:text="@string/add_note_button"
                    android:visibility="visible"
                    app:logcardmodel="@{logcardmodel}"
                    app:viewModel="@{viewmodel}"
                    android:onClick="@{() -> viewmodel.onAddNoteClicked(position)}" />

                <androidx.appcompat.widget.AppCompatButton
                    android:id="@+id/prevNoteButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:visibility="gone"
                    android:textColor="@color/white"
                    style="@style/Widget.AppCompat.Button.Colored"
                    android:text="@string/prev_note_button"
                    android:onClick="@{() -> viewmodel.onPrevNoteClicked(position, logcardmodel.prevSetData.prevNoteDay)}" />

            </RelativeLayout>
        </androidx.cardview.widget.CardView>

    </LinearLayout>
</layout>


